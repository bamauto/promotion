---
import type { RegionId } from '../lib/regions';
import { REGIONS, getRegionDomain } from '../lib/regions';

interface Props {
  region: RegionId;
}

const { region } = Astro.props;
const regionData = REGIONS[region];
const baseUrl = getRegionDomain(region);

// Region-specific business information
const businessInfo: Record<RegionId, { address: string; areaServed: string; geo: { lat: number; lng: number } }> = {
  bundang: {
    address: '경기도 성남시 분당구',
    areaServed: '분당, 성남',
    geo: { lat: 37.3825, lng: 127.1198 }
  },
  suwon: {
    address: '경기도 수원시',
    areaServed: '수원',
    geo: { lat: 37.2636, lng: 127.0286 }
  },
  dongtan: {
    address: '경기도 화성시 동탄',
    areaServed: '동탄, 화성',
    geo: { lat: 37.2006, lng: 127.0979 }
  },
  jengja: {
    address: '경기도 성남시 분당구 정자동',
    areaServed: '정자동, 분당',
    geo: { lat: 37.3667, lng: 127.1083 }
  },
  ingedong: {
    address: '경기도 수원시 팔달구 인계동',
    areaServed: '인계동, 수원',
    geo: { lat: 37.2652, lng: 127.0327 }
  },
  gwanggyo: {
    address: '경기도 수원시 영통구 광교동',
    areaServed: '광교, 광교중앙역, 상현역',
    geo: { lat: 37.2924, lng: 127.0437 }
  },
  yeongtong: {
    address: '경기도 수원시 영통구 영통동',
    areaServed: '영통, 수원',
    geo: { lat: 37.2555, lng: 127.0612 }
  },
  anyang: {
    address: '경기도 안양시',
    areaServed: '안양, 평촌, 범계, 인덕원, 만안구, 동안구',
    geo: { lat: 37.3956, lng: 126.9227 }
  }
};

const info = businessInfo[region];

const schema = {
  '@context': 'https://schema.org',
  '@type': 'LocalBusiness',
  '@id': `${baseUrl}/#localbusiness`,
  name: `${regionData.name} ${regionData.keyword}`,
  description: regionData.description,
  url: baseUrl,
  address: {
    '@type': 'PostalAddress',
    addressLocality: info.address,
    addressRegion: '경기도',
    addressCountry: 'KR'
  },
  geo: {
    '@type': 'GeoCoordinates',
    latitude: info.geo.lat,
    longitude: info.geo.lng
  },
  areaServed: {
    '@type': 'GeoCircle',
    geoMidpoint: {
      '@type': 'GeoCoordinates',
      latitude: info.geo.lat,
      longitude: info.geo.lng
    },
    geoRadius: '10000'
  },
  priceRange: '$$',
  openingHoursSpecification: {
    '@type': 'OpeningHoursSpecification',
    dayOfWeek: ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'],
    opens: '18:00',
    closes: '05:00'
  }
};
---

<script is:inline type="application/ld+json" set:html={JSON.stringify(schema)} />
